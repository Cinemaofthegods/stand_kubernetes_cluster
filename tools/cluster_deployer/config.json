{
  "extended_deployer_logging": true,
  "cluster_ip": "10.11.1.251",
  "dns_ip": "10.11.1.254",
  "dockerhub_registry": "deeppavlov",
  "docker_base_url": "unix://var/run/docker.sock",
  "test_image_url": "http://0.0.0.0:{{PORT}}/answer",
  "test_deployment_url": "https://{{CLUSTER_PORT}}.lnsigo.mipt.ru/answer",
  "local_log_dir": "~/dev/logs/",
  "container_log_dir": "/logs/",
  "local_gpu_device_index": 0,
  "gpu_templates": [
    "gpu",
    "gpu_custom",
    "gpu_obsolete"
  ],
  "model_groups": {
    "stand": [
      "stand_ner_ru",
      "stand_ner_en",
      "stand_intents_en",
      "stand_insults_en",
      "stand_ranking_en",
      "stand_squad_ru",
      "stand_squad_en",
      "stand_odqa_ru",
      "stand_odqa_en"
    ],
    "dpas": [
      "dpas_ranking_chitchat_2staged_tfidf_smn_v1",
      "dpas_ranking_chitchat_2staged_tfidf_smn_v2",
      "dpas_ranking_chitchat_2staged_tfidf_smn_v3"
    ],
    "all": [],
    "custom": [
      "dpas_ru_odqa_infer_wiki",
      "dpas_ru_odqa_infer_wiki_retr_noans"
    ]
  },
  "paths": {
    "deployer_dir": "{{root_dir}}/tools/cluster_deployer/",
    "templates_dir": "{{root_dir}}/tools/add_dp_model/templates/",
    "models_subdir": "models/",
    "models_dir": "{{root_dir}}/{{models_subdir}}/",
    "kuber_configs_dir": "{{root_dir}}/kuber_configs/models/",
    "temp_dir": "{{deployer_dir}}/temp/",
    "log_dir": "{{deployer_dir}}/log/"
  },
  "models": [
    {
      "MODEL_NAME": "default",
      "PREFIX": "@",
      "CONFIG_FILE": "",
      "TEMPLATE": "",
      "BRANCH": "",
      "CUDA_VERSION": "",
      "TF_VERSION": "",
      "PORT": "",
      "CLUSTER_PORT": "",
      "MODEL_ARGS": [],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "run_params": {
        "_flags": [
          "--stateful"
        ],
        "--token": "<telegram_token>"
      },
      "test_image_url": "",
      "test_deployment_url": "",
      "image_polling_timeout_sec": 60,
      "deployment_polling_timeout_sec": 60,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ner_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "ner/ner_rus.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6004,
      "CLUSTER_PORT": 7004,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ner_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "ner/ner_ontonotes.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6010,
      "CLUSTER_PORT": 7010,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "squad_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "squad/squad_ru.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6005,
      "CLUSTER_PORT": 7005,
      "MODEL_ARGS": [
        "text1",
        "text2"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "squad_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "squad/squad.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6008,
      "CLUSTER_PORT": 7008,
      "MODEL_ARGS": [
        "text1",
        "text2"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "intents_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "classifiers/intents_snips.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6007,
      "CLUSTER_PORT": 7007,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "ranking/ranking_insurance_interact.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6009,
      "CLUSTER_PORT": 7009,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "insults_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "classifiers/insults_kaggle.json",
      "TEMPLATE": "no_gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6006,
      "CLUSTER_PORT": 7006,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "odqa_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "odqa/en_odqa_pop_infer_enwiki20180211.json",
      "TEMPLATE": "gpu",
      "BRANCH": "",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6011,
      "CLUSTER_PORT": 7011,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 1200,
      "deployment_polling_timeout_sec": 2400,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "odqa_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki_retr_noans.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "squad_with_retr_data",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6012,
      "CLUSTER_PORT": 7012,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v1",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v1.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "skill_wrapping",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6061,
      "CLUSTER_PORT": 7061,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "interactmsbot",
      "run_params": {
        "_flags": [
          "--stateful",
          "--default-skill"
        ],
        "--ms-id": "",
        "--ms-secret": "''"
      },
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v2",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v2.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "skill_wrapping",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6062,
      "CLUSTER_PORT": 7062,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "interactmsbot",
      "run_params": {
        "_flags": [
          "--stateful",
          "--default-skill"
        ],
        "--ms-id": "",
        "--ms-secret": "''"
      },
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v3",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v3.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "skill_wrapping",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6063,
      "CLUSTER_PORT": 7063,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "interactmsbot",
      "run_params": {
        "_flags": [
          "--stateful"
        ],
        "--ms-id": "",
        "--ms-secret": "''"
      },
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ru_odqa_infer_wiki",
      "PREFIX": "dpas",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki.json",
      "TEMPLATE": "no_gpu_custom",
      "BRANCH": "dev",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6064,
      "CLUSTER_PORT": 7064,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "interactmsbot",
      "run_params": {
        "_flags": [],
        "--ms-id": "",
        "--ms-secret": "''"
      },
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ru_odqa_infer_wiki_retr_noans",
      "PREFIX": "dpas",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki_retr_noans.json",
      "TEMPLATE": "no_gpu_custom",
      "BRANCH": "squad_with_retr_data",
      "CUDA_VERSION": "9.0",
      "TF_VERSION": "",
      "PORT": 6065,
      "CLUSTER_PORT": 7065,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "interactmsbot",
      "run_params": {
        "_flags": [],
        "--ms-id": "",
        "--ms-secret": "''"
      },
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    }
  ]
}
