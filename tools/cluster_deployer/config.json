{
  "extended_deployer_logging": true,
  "cluster_ip": "10.11.1.251",
  "dns_ip": "10.11.1.254",
  "dockerhub_registry": "deeppavlov",
  "docker_base_url": "unix://var/run/docker.sock",
  "test_image_url": "http://0.0.0.0:{{PORT}}/answer",
  "test_deployment_url": "https://{{CLUSTER_PORT}}.lnsigo.mipt.ru/answer",
  "local_log_dir": "~/dev/logs/",
  "container_log_dir": "/logs/",
  "local_gpu_device_index": 0,
  "gpu_templates": [
    "gpu",
    "gpu_custom",
    "gpu_obsolete",
    "rb_gpu_custom"
  ],
  "model_groups": {
    "stand": [
      "stand_ner_ru",
      "stand_ner_en",
      "stand_intents_en",
      "stand_insults_en",
      "stand_ranking_en",
      "stand_squad_ru",
      "stand_squad_en",
      "stand_odqa_ru",
      "stand_odqa_en"
    ],
    "dpas": [
      "dpas_ranking_chitchat_2staged_tfidf_smn_v1",
      "dpas_ranking_chitchat_2staged_tfidf_smn_v2",
      "dpas_ranking_chitchat_2staged_tfidf_smn_v3",
      "dpas_ru_odqa_infer_wiki",
      "dpas_ru_odqa_infer_wiki_retr_noans"
    ],
    "demo": [
      "demo_config_chitchat_vs_odqa"
    ],
    "all": [],
    "custom": [
      "sber_ranking_chitchat_2staged_tfidf_smn_v2",
      "sber_ranking_chitchat_2staged_tfidf_smn_v3"
    ]
  },
  "paths": {
    "deployer_dir": "{{root_dir}}/tools/cluster_deployer/",
    "templates_dir": "{{root_dir}}/tools/add_dp_model/templates/",
    "models_subdir": "models/",
    "models_dir": "{{root_dir}}/{{models_subdir}}/",
    "kuber_configs_dir": "{{root_dir}}/kuber_configs/models/",
    "temp_dir": "{{deployer_dir}}/temp/",
    "log_dir": "{{deployer_dir}}/log/"
  },
  "model_template": {
    "MODEL_NAME": "template",
    "PREFIX": "template",
    "CONFIG_FILE": "",
    "TEMPLATE": "",
    "BRANCH": "",
    "CUDA_VERSION": "",
    "TF_VERSION": "",
    "PORT": "",
    "CLUSTER_PORT": "",
    "MODEL_ARGS": [],
    "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
    "run_mode": "riseapi",
    "run_params": {
      "_flags": []
    },
    "test_image_url": "",
    "test_deployment_url": "",
    "image_polling_timeout_sec": 60,
    "deployment_polling_timeout_sec": 60,
    "pipeline": "all_up_kuber"
  },
  "models": [
    {
      "MODEL_NAME": "ner_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "ner/ner_rus.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6004,
      "CLUSTER_PORT": 7004,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ner_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "ner/ner_ontonotes.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6010,
      "CLUSTER_PORT": 7010,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "squad_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "squad/squad_ru.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6005,
      "CLUSTER_PORT": 7005,
      "MODEL_ARGS": [
        "text1",
        "text2"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "squad_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "squad/squad.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6008,
      "CLUSTER_PORT": 7008,
      "MODEL_ARGS": [
        "text1",
        "text2"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "intents_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "classifiers/intents_snips.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6007,
      "CLUSTER_PORT": 7007,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "ranking/ranking_insurance_interact.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6009,
      "CLUSTER_PORT": 7009,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "insults_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "classifiers/insults_kaggle.json",
      "TEMPLATE": "no_gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6006,
      "CLUSTER_PORT": 7006,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "odqa_en",
      "PREFIX": "stand",
      "CONFIG_FILE": "odqa/en_odqa_pop_infer_enwiki20180211.json",
      "TEMPLATE": "gpu",
      "CUDA_VERSION": "9.0",
      "PORT": 6011,
      "CLUSTER_PORT": 7011,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 1200,
      "deployment_polling_timeout_sec": 2400,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "odqa_ru",
      "PREFIX": "stand",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki_retr_noans.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "squad_with_retr_data",
      "CUDA_VERSION": "9.0",
      "PORT": 6012,
      "CLUSTER_PORT": 7012,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v1",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v1.json",
      "TEMPLATE": "rb_gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6061,
      "CLUSTER_PORT": 7061,
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "",
      "run_params": {
        "_flags": [
          "--default-skill"
        ],
        "--host": "10.11.1.58",
        "--port": 8433,
        "--token": "5db43246-3a4f-4d14-9301-3fc02542fc78"
      },
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v2",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v2.json",
      "TEMPLATE": "rb_gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6062,
      "CLUSTER_PORT": 7062,
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "",
      "run_params": {
        "_flags": [
          "--default-skill"
        ],
        "--host": "10.11.1.58",
        "--port": 8433,
        "--token": "9a446c33-335b-4755-90d6-806ff5dc2bbc"
      },
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v3",
      "PREFIX": "dpas",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v3.json",
      "TEMPLATE": "rb_gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6063,
      "CLUSTER_PORT": 7063,
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "",
      "run_params": {
        "_flags": [],
        "--host": "10.11.1.58",
        "--port": 8433,
        "--token": "1466d7b7-384d-42ec-8c61-e7a9d604357c"
      },
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ru_odqa_infer_wiki",
      "PREFIX": "dpas",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki.json",
      "TEMPLATE": "rb_no_gpu_custom",
      "BRANCH": "dev",
      "CUDA_VERSION": "9.0",
      "PORT": 6064,
      "CLUSTER_PORT": 7064,
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "",
      "run_params": {
        "_flags": [
          "--default-skill"
        ],
        "--host": "10.11.1.58",
        "--port": 8433,
        "--token": "cd496eee-61a5-4d0a-a0a0-d5090d750d57"
      },
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ru_odqa_infer_wiki_retr_noans",
      "PREFIX": "dpas",
      "CONFIG_FILE": "odqa/ru_odqa_infer_wiki_retr_noans.json",
      "TEMPLATE": "rb_no_gpu_custom",
      "BRANCH": "squad_with_retr_data",
      "CUDA_VERSION": "9.0",
      "PORT": 6065,
      "CLUSTER_PORT": 7065,
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "",
      "run_params": {
        "_flags": [
          "--default-skill"
        ],
        "--host": "10.11.1.58",
        "--port": 8433,
        "--token": "72446a99-40a1-4dd8-9cd2-2937ece5dc9c"
      },
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "config_chitchat_vs_odqa",
      "PREFIX": "demo",
      "CONFIG_FILE": "classifiers/config_chitchat_vs_odqa.json",
      "TEMPLATE": "no_gpu_custom",
      "BRANCH": "feat/chitchat_vs_odqa",
      "CUDA_VERSION": "9.0",
      "PORT": 6066,
      "CLUSTER_PORT": 7066,
      "MODEL_ARGS": [
        "text1"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 120,
      "deployment_polling_timeout_sec": 600,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v2",
      "PREFIX": "sber",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v2.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6067,
      "CLUSTER_PORT": 7067,
      "MODEL_ARGS": [
        "utterance"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "image_polling_timeout_sec": 600,
      "deployment_polling_timeout_sec": 1200,
      "pipeline": "all_up_kuber"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v3",
      "PREFIX": "sber",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v3.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6068,
      "CLUSTER_PORT": 7068,
      "MODEL_ARGS": [
        "utterance",
        "history",
        "dummy_state"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "pipeline": "all_up_kuber_no_tests"
    },
    {
      "MODEL_NAME": "ranking_chitchat_2staged_tfidf_smn_v8",
      "PREFIX": "sber",
      "CONFIG_FILE": "ranking/ranking_chitchat_2staged_tfidf_smn_v8.json",
      "TEMPLATE": "gpu_custom",
      "BRANCH": "hybrid_ranker",
      "CUDA_VERSION": "9.0",
      "PORT": 6069,
      "CLUSTER_PORT": 7069,
      "MODEL_ARGS": [
        "utterance",
        "history",
        "dummy_state"
      ],
      "DOCKER_REGISTRY": "kubeadm.ipavlov.mipt.ru:5000",
      "run_mode": "riseapi",
      "pipeline": "all_up_kuber_no_tests"
    }
  ]
}
